Находим id юзера и его изучаемый язык по номеру сессии
SELECT Users.UserID, FLang FROM Sessions left join Users On Sessions.UserID = Users.UserID WHERE SessionID = 'номер сессии';
находится его уровень
SELECT LevelID FROM UserLevel WHERE UserID = номер юзера AND LangID = номер языка
если нет записи в таблице UserLevel - вызывается начальный тест

Начальный тест:
выведем все номера пар слов для каждого уровня:
Select ID FROM Pair left join Dictionary ON Pair.DicID = Dictionary.DictionaryID left join Level ON Dictionary.LevelID = Level.LevelID WHERE LevelName = 'Уровень' And Theme = 'basic'
Уровни:
Elementary
Intermediate
Upper-Intermediate

выбрать 10 пар из каждого уровня и заполнить таблицу Test:
INSERT INTO TEST(TestID,TypeID, PairID) values(номер теста, 1, номер пары)

Select Spell, TypeName FROM Test left join Pair ON Test.PairID = Pair.ID
left join Words On Pair.Word1ID = Words.WordID OR Pair.Word2ID = Words.WordID left join TestType On Test.TestID = TestType.TypeID
WHERE TestID = номер теста
выдает слово1, слово2 и тип вопроса, для начального теста-'слово-перевод'

Непервичный тест(если есть строчка в UserLevel):
выведем все номера пар для изучения
SELECT PairID FROM WordsToLearn left join Sessions ON WordsToLearn.UserID = Sessions.UserID WHERE Sessions.SessionID = 'номер сессии'
Для теста слово-перевод
Выбираем 5 пар
INSERT INTO TEST(TestID,TypeID, PairID)
SELECT номер теста, TypeID, номер пары
FROM TestType
WHERE TypeName = 'слово-перевод'

Для теста перевод-слово
Выбираем 5 пар
INSERT INTO TEST(TestID,TypeID, PairID)
SELECT номер теста, TypeID, номер пары
FROM TestType
WHERE TypeName = 'перевод-слово'

Для теста аудио
Выбираем 5 пар
INSERT INTO TEST(TestID,TypeID, PairID)
SELECT номер теста, TypeID, номер пары
FROM TestType
WHERE TypeName = 'аудио'

Для полного теста: все три части

Select Spell, Phonetic, TypeName FROM Test left join Pair ON Test.PairID = Pair.ID
left join Words On Pair.Word1ID = Words.WordID OR Pair.Word2ID = Words.WordID left join TestType On Test.TestID = TestType.TypeID
WHERE TestID = номер теста

Выводит слово, транскрипцию и тип вопроса

ТЕСТ НА ПОВТОРЕНИЕ:
выведем все номера пар для повторения
SELECT PairID FROM WordsToRepeat 
left join Sessions ON WordsToLearn.UserID = Sessions.UserID 
left join TimeRepeat ON WordToRepeat.TimeToRepeatID = TimeRepeat.TimeRepeatID
WHERE Sessions.SessionID = 'номер сессии' AND Time <= сегодня в виде строчки
Для теста слово-перевод
Выбираем 5 пар
INSERT INTO TEST(TestID,TypeID, PairID)
SELECT номер теста, TypeID, номер пары
FROM TestType
WHERE TypeName = 'слово-перевод'

Для теста перевод-слово
Выбираем 5 пар
INSERT INTO TEST(TestID,TypeID, PairID)
SELECT номер теста, TypeID, номер пары
FROM TestType
WHERE TypeName = 'перевод-слово'

Для теста аудио
Выбираем 5 пар
INSERT INTO TEST(TestID,TypeID, PairID)
SELECT номер теста, TypeID, номер пары
FROM TestType
WHERE TypeName = 'аудио'

Для полного теста: все три части

Select Spell, Phonetic, TypeName FROM Test left join Pair ON Test.PairID = Pair.ID
left join Words On Pair.Word1ID = Words.WordID OR Pair.Word2ID = Words.WordID left join TestType On Test.TestID = TestType.TypeID
WHERE TestID = номер теста

Выводит слово, транскрипцию и тип вопроса


